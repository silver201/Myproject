<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
    
    <script>
        function cb(selection) {
            $.getJSON({
                url: "/callback", data: { 'data': selection }, success: function (result) {
                    Plotly.newPlot('chart', result, {});;
                }
            });
        }
    </script>
<script>
        function cb1(selection) {
            $.getJSON({
                url: "/callback1", data: { 'data': selection }, success: function (result) {
                    Plotly.newPlot('chart1', result, {});;
                }
            });
        }
    </script>
<script>
        function cb2(selection) {
            $.getJSON({
                url: "/callback2", data: { 'data': selection }, success: function (result) {
                    Plotly.newPlot('chart11', result, {});;
                }
            });
        }
    </script>
    <script>
        function cb3(selection) {
            $.getJSON({
                url: "/callback3", data: { 'data': selection }, success: function (result) {
                    Plotly.newPlot('chart12', result, {});;
                }
            });
        }
    </script>


</head>

<body style="font-family:arial, sans-serif">
    <h1 align='center'>可视化神器Plotly_Express中内置数据集：餐馆的订单流水，简易数据分析</h1>
    <h2 align='center'>餐馆数据订单包含字段：total_bill(总账单)、tip(小费)、sex(性别[男(Male)、女(Female)])、smoker(是否吸烟[是(Yes)、否(No)])、day(星期几)、time(早中餐哪一餐)、size(用餐人数)</h2>
    <h3 align='center'>数据集中星期是"Thur", "Fri", "Sat", "Sun"，time是"Lunch", "Dinner"</h3>
    <br><br>


   <!--  <div>
    <h3>(1)矩阵散点图，查看指标相关性</h3>
    <div id="chart2" class="chart2"></div>
    <h3>从相关性可以看到，每个数据的相关性都是挺强的</h3><br>
    </div>


    <div>
    <h3>(2)餐馆订单流水的并行类别图。并行类别图：是并行坐标的分类模拟，使用它们可视化数据集中多组类别之间的关系</h3>
    <div id="chart3" class="chart3"></div>
    <h3>当鼠标移动到五列竖条时，可以得到各项的一个统计信息，比如可以知道Female有87，Male有157；不吸烟者有151，吸烟者有93；每当移动到不同的列时就能看到不同的总数信息。并且当鼠标移动到不同图上的每一根线上都可以得到连接五个属性的一个统计，比如说可以看到女性在周三三个人吃晚餐的数量有9。通过这样每一个数据我们就能对用餐各个属性之间的大致关系和数量又一个简单的了解</h3><br>
    </div> -->

    <div>
    <h3>(3)查看男性和女性的有关总账单和小费的关系</h3>
    <h3>输入男性还是女性，男（Male）女（Female）,默认男性</h3>
    <input type="text" id="fname" name="fname" onchange="cb(this.value)">
    <div id="chart" class="chart"></div>
    <h3>可以看到男性总账单集中在10-20之间，小费集中在2-6之间，并且有一个大致趋势是男性总账单越高的小费可能给得越高</h3>
    <h3>而女性总账单集中也在10-20之间，但小费集中在2-4之间</h3><br>
    </div>

    <div>
    <h3>(4)通过多幅散点，查看总账单、小费、是否吸烟以及星期和时间的关系</h3>
    <h3>默认选择是男性,男（Male）女（Female）</h3>
     <input type="text" id="fname" name="fname" onchange="cb1(this.value)">
    <div id="chart1" class="chart1"></div>
    <h3>可以看到男性和女性在周四的晚餐(Dinner)和周六周日的中餐(Lunch)数据都甚少，几乎为空</h3>
    <h3>而在已有的数据可以看到无论是吸烟者还是不吸烟者大部分人给小费的数目都会随着总账单的增长而增长。而有趣的是不论男女的吸烟者在周日晚餐时的小费数目是随总账单数目增加而减少的</h3><br>
    </div>


    <!-- <div>
    <h3>(5)男女、是否吸烟以及总账单生成的条形图，看看他们之间的关系</h3>
    
    <div id="chart5" class="chart5"></div>
    <h3>通过条形图可以得到，总体上男性总账单数比女性要多，并且不论男女不吸烟者的账单数都比吸烟者高，而且男性吸烟者要比女性多。</h3><br>
    </div>

    <div>
    <h3>(6)再加上星期，看看男女、是否吸烟以及总账单生成的条形图是怎样的</h3>
    <div id="chart6" class="chart6"></div>
    <h3>可以看到，男性和女性在周天这天去餐馆吃饭是一周中最多的。从吸烟情况来看在周五和周六吸烟者的订单数目要比不吸烟者多</h3><br>
    </div>

    <div>
    <h3>(7)是否吸烟关于账单和星期的箱形图</h3>
    <div id="chart7" class="chart7"></div>
    <h3>通过箱形图可以看到总体上星期天是人流量最大的一天，这一天的总账单数目最多</h3><br>
    </div>

    <h3>(8)关于男女性吸烟情况和小费情况所做的小提琴图，同时在内部显示箱图</h3>
    <div id="chart8" class="chart8"></div>
    <h3>通过小提琴图可以看到总体上不吸烟者比吸烟者更多，并且大家的小费大多数都集中在2-6左右</h3><br>
    </div>
    
    <h1 align='center'>可视化神器Plotly_Express中内置数据集：不同国家历年GDP收入与人均寿命，简易数据分析</h1>
    <h2 align='center'>不同国家历年GDP收入与人均寿命包含字段：country(国家)、continent(洲)、year(年份)、lifeExp(平均寿命)、pop(人口数量)、gdpPrecap(GDP)、iso_alpha(国家简称)、iso_num(国家编号)</h2>
    <div>
    <h3>(9)动画地图:关于这么多年各个国家和平均寿命</h3>
    <div id="chart9" class="chart9"></div>
    <h3>在地图上可以看到各个国家的位置，并且鼠标移动到具体位置可以看到该国家简称和平均寿命，下面的一行年份可以随机选择，根据选择会生成不同的地图动画，这样我们就可以看到大致的各个国家年份的平均寿命情况。地图旋转方便看到每个国家</h3>
    <h3>这幅图有趣的点在于当你拉动时间条是，你可以通过颜色的变化看到每个国家的平均寿命的变换，很显眼的是雄鸡中国，从1952的深紫色平均寿命40慢慢慢慢颜色变浅到07年的橙色，中国在慢慢崛起，人民生活也越来越好，平均寿命也越来越长。</h3><br>
    </div>


    <div>
    <h3>(10)动画地图：关于这些年，各大洲各个国家人口的关系</h3>
    <div id="chart4" class="chart4"></div>
    <h3>这幅图也是如上面一样，当你拉动时间条时，你可以看到各个洲的小圆点慢慢变多，慢慢变大，说明人口在慢慢增长，科技的发展带来了更多的生机和活力。当你拉动时间条时仿佛看到了世界的变迁，非常有趣</h3><br>
    </div>

    <div>
    <h3>(11)地理坐标线条图，设定展示立体地图</h3>
    <div id="chart10" class="chart10"></div>
    <h3>展示的是每个洲上面的每个国家的点连成的线，当鼠标移动到地图上的对应点时就会展示该洲名和国家名</h3><br>
    </div>

    <div>
    <h3>(12)各个国家的平均寿命演变折线图，默认是United Kingdom</h3>
    <input type="text" id="fname" name="fname" onchange="cb2(this.value)">
    <div id="chart11" class="chart11"></div>
    <h3>在这里输入不同的国家你可以看到从1952年到2007年平均寿命的一个演变，一般来说各个国家的平均寿命都是呈现增长的一个曲线。而当输入Chian时，会发现有一个明显的下降折线，这是苦难的中国遭罪的那些年，看到这样的曲线回忆起那样艰难的岁月是令人心痛的。</h3><br>
    </div>

    <div>
    <h3>(13)各个国家的GDP演变折线图，默认是United Kingdom</h3>
    <input type="text" id="fname" name="fname" onchange="cb3(this.value)">
    <div id="chart12" class="chart12"></div>
    <h3>在这里输入不同的国家你可以看到从1952年到2007年各国GPD的一个演变，大体上每个国家都是呈增长状态的</h3><br>
    </div>

   <div>
    <h3>(14)气泡图：这里的每一点都是一个国家</h3>
   
    <div id="chart13" class="chart13"></div>
    <h3>这是2007这一年的数据，每一点都是一个国家，气泡的大小由国家人口数量决定，人口越多气泡越大。从图可以看到Africa（非洲）的平均寿命是低于其他几个洲的；(Asia)亚洲人口是最多的；GDP最高的出现在Europe(欧洲);普遍的欧洲国家平均寿命和GDP都高</h3><br>
    </div>

    <div>
    <h3>(15)通过 facet_col =”continent“ 对上面的气泡图进行划分，x轴使用 对数（log_x）以便在我们在图表中看的更清晰</h3>
   
    <div id="chart14" class="chart14"></div>
    <h3>这是对上面的14个图的各州的具体分解，得到的结果也与上面是一样的</h3><br>
    </div>

    <div>
    <h3>(16)上面两个图都是静态的只有2007年一年的数据，接下来添加时间条，动态展示各大洲各个国家平均寿命和GDP的演变</h3>
    
    <div id="chart15" class="chart15"></div>
    <h3>通过动态的动画可以知道，在1952年到2007年这些年间,所有的总体情况平均寿命和GDP都是在增长的，也可以很明显的通过动画看到亚洲的人口和GDP增长的速度之快</h3>
    <br>
    </div>

    <div>
    <h3>(17)各州平均寿命和时间的线条图，</h3>
    
    <div id="chart16" class="chart16"></div>
    <h3>通过线条图可以看到所有洲的平均寿命大体上都在增长，而非洲和亚洲有国家的线是突然向下在恢复增长的，都是因为落后要挨打，熬过了苦难的日子，大家生活水平提高平均寿命也就提高了</h3><br>
    </div>

    <div>
    <h3>(18)各大洲人口数量和年份的堆积区域图</h3>
    
    <div id="chart17" class="chart17"></div>
    <h3>通过堆积图可以看到各大洲各个国家人口总数总体是不停增加的，由其实亚洲增加的数目最多</h3><br>
    </div> -->
</body>

<script>
    d = {{ graphJSON | safe }};
    Plotly.newPlot('chart', d, {});
</script>
<script>
    c = {{ graphJSON1 | safe }};
    Plotly.newPlot('chart1', c, {});
</script>
<script>
    a = {{ graphJSON2 | safe }};
    Plotly.newPlot('chart2', a, {});
</script>
<script>
    b = {{ graphJSON3 | safe }};
    Plotly.newPlot('chart3', b, {});
</script>
<script>
    e = {{ graphJSON4 | safe }};
    Plotly.newPlot('chart4', e, {});
</script>
<script>
    f = {{ graphJSON5 | safe }};
    Plotly.newPlot('chart5', f, {});
</script>
<script>
    g = {{ graphJSON6 | safe }};
    Plotly.newPlot('chart6', g, {});
</script>
<script>
    h = {{ graphJSON7 | safe }};
    Plotly.newPlot('chart7', h, {});
</script>
<script>
    i = {{ graphJSON8 | safe }};
    Plotly.newPlot('chart8', i, {});
</script>
<script>
    j = {{ graphJSON9 | safe }};
    Plotly.newPlot('chart9', j, {});
</script>
<script>
    k = {{ graphJSON10 | safe }};
    Plotly.newPlot('chart10', k, {});
</script>
<script>
    l = {{ graphJSON11 | safe }};
    Plotly.newPlot('chart11', l, {});
</script>
<script>
    m = {{ graphJSON12 | safe }};
    Plotly.newPlot('chart12', m, {});
</script>
<script>
    n = {{ graphJSON13 | safe }};
    Plotly.newPlot('chart13', n, {});
</script>
<script>
    o = {{ graphJSON14 | safe }};
    Plotly.newPlot('chart14', o, {});
</script>
<script>
    p = {{ graphJSON15 | safe }};
    Plotly.newPlot('chart15', p, {});
</script>
<script>
    q = {{ graphJSON16 | safe }};
    Plotly.newPlot('chart16', q, {});
</script>
<script>
    r = {{ graphJSON17 | safe }};
    Plotly.newPlot('chart17', r, {});
</script>
</html>
